<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GitLab Copilot - AI-Powered Development Assistant</title>
  <meta name="description" content="Seamlessly integrate AI assistance into your GitLab workflow with intelligent code suggestions and automated development support.">

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ¤–</text></svg>">

  <!-- CSS -->
  <link rel="stylesheet" href="/css/main.css">

  <!-- Preload critical resources -->
  <link rel="preload" href="/js/api.js" as="script">
  <link rel="preload" href="/js/components.js" as="script">
</head>
<body>
  <div id="app">
    <!-- Content will be loaded here -->
  </div>

  <!-- Scripts -->
  <script src="/js/api.js"></script>
  <script src="/js/components.js"></script>

  <script>
    // Initialize the landing page
    document.addEventListener('DOMContentLoaded', async function() {
      const app = document.getElementById('app');

      // Check if user is already authenticated
      if (api.isAuthenticated()) {
        // Validate token and redirect to dashboard if valid
        const validation = await api.validateToken();
        if (validation.valid) {
          Navigation.redirectToDashboard();
          return;
        } else {
          // Clear invalid tokens
          api.clearTokens();
        }
      }

      // Render landing page
      app.innerHTML = createLandingPage();
    });

    function createLandingPage() {
      const basePath = window.location.pathname.includes('/auth') ? '/auth' : '';

      return createPageWrapper(
        'GitLab Copilot',
        'AI-powered development assistant that integrates seamlessly with your GitLab workflow',
        `
          <section class="landing-hero">
            <div class="landing-hero-content">
              <span class="landing-pill landing-hero-eyebrow">
                <span class="landing-pill-dot"></span>
                AI for GitLab Teams
              </span>
              <h1 class="landing-hero-title">GitLab Copilot Â· ç°ä»£åä½œä½“éªŒ</h1>
              <p class="landing-hero-copy">
                å°† GitLab çš„ Issueã€Merge Request ä¸æµæ°´çº¿æ¥å…¥ AIï¼Œè®©å›¢é˜Ÿä»¥ç»Ÿä¸€çš„ç°ä»£è®¾è®¡è¯­è¨€æ‰“é€ æµç•…ä½“éªŒæ¨è¿›æ¯ä¸€æ¬¡è¿­ä»£ã€‚
              </p>
              <div class="landing-hero-actions">
                <a href="${basePath}/register" class="btn btn-primary btn-lg">
                  ç«‹å³ä¸Šæ‰‹
                </a>
                <a href="${basePath}/docs" class="btn btn-secondary btn-lg">
                  æŸ¥çœ‹æ–‡æ¡£
                </a>
                <span class="landing-hero-note">
                  3 åˆ†é’Ÿå®Œæˆéƒ¨ç½²
                  <a href="${basePath}/login">å·²æœ‰è´¦æˆ·ï¼Ÿç™»å½•</a>
                </span>
              </div>
              <div class="landing-hero-metrics">
                <div class="landing-metric">
                  <span class="landing-metric-value">2Ã—</span>
                  <span class="landing-metric-label">äº¤ä»˜èŠ‚å¥æå‡</span>
                </div>
                <div class="landing-metric">
                  <span class="landing-metric-value">85%</span>
                  <span class="landing-metric-label">è¯„å®¡è‡ªåŠ¨åŒ–è¦†ç›–</span>
                </div>
                <div class="landing-metric">
                  <span class="landing-metric-value">24/7</span>
                  <span class="landing-metric-label">å…¨å¤©å€™ GitLab å®ˆæŠ¤</span>
                </div>
              </div>
            </div>
            <div class="landing-hero-visual">
              <div class="landing-hero-glow"></div>
              <div class="landing-hero-card">
                <div class="landing-hero-card__chips">
                  <span class="landing-pill landing-pill--accent">
                    <span class="landing-pill-dot"></span>
                    Merge Request #214
                  </span>
                  <span class="landing-pill landing-pill--glass">
                    <span class="landing-pill-dot"></span>
                    Claude Â· Streaming
                  </span>
                </div>
                <h3 class="landing-hero-card__title">è‡ªåŠ¨è¯„å®¡æ­£åœ¨ç”Ÿæˆ</h3>
                <p class="landing-hero-card__subtitle">
                  å®æ—¶åˆ†æ 14 ä¸ªæ–‡ä»¶å·®å¼‚ï¼Œè¾“å‡ºå¯ç›´æ¥æäº¤çš„ç»“æ„åŒ–å»ºè®®ã€‚
                </p>
                <div class="landing-hero-card__timeline">
                  <div class="landing-hero-card__step">
                    <span class="landing-hero-card__step-dot is-active"></span>
                    <div>
                      <p class="landing-hero-card__step-title">è¯­ä¹‰ç†è§£å®Œæˆ</p>
                      <p class="landing-hero-card__step-desc">è¯†åˆ«é«˜é£é™©æ”¹åŠ¨å¹¶è¡¥å……æµ‹è¯•æ¸…å•ã€‚</p>
                    </div>
                  </div>
                  <div class="landing-hero-card__step">
                    <span class="landing-hero-card__step-dot"></span>
                    <div>
                      <p class="landing-hero-card__step-title">ç”Ÿæˆç»“æ„åŒ–è¯„è®º</p>
                      <p class="landing-hero-card__step-desc">è‡ªåŠ¨æ’°å†™ä»£ç çº§å»ºè®®ä¸å¯æ‰§è¡Œä»»åŠ¡ã€‚</p>
                    </div>
                  </div>
                  <div class="landing-hero-card__step">
                    <span class="landing-hero-card__step-dot"></span>
                    <div>
                      <p class="landing-hero-card__step-title">æ¨é€åˆ° GitLab</p>
                      <p class="landing-hero-card__step-desc">åŒæ­¥åˆ° MR è®¨è®ºåŒºå¹¶å…³è”è´Ÿè´£äººã€‚</p>
                    </div>
                  </div>
                </div>
                <div class="landing-hero-card__footer">
                  <div class="landing-hero-card__avatars">
                    <span class="landing-avatar">AC</span>
                    <span class="landing-avatar landing-avatar--ghost">UX</span>
                    <span class="landing-avatar landing-avatar--ghost">FE</span>
                  </div>
                  <span class="landing-hero-card__footer-note">å›¢é˜Ÿå®æ—¶æ”¶åˆ° AI è¯„å®¡è¿›åº¦</span>
                </div>
              </div>
            </div>
          </section>

          <section class="landing-section">
            <div class="landing-section-heading">
              <span class="landing-pill landing-pill--glass">
                <span class="landing-pill-dot"></span>
                Powerful Features
              </span>
              <h2 class="landing-section-title">æ ¸å¿ƒèƒ½åŠ›</h2>
              <p class="landing-section-subtitle">
                ä»¥ç°ä»£äº§å“è®¾è®¡é£æ ¼æ‰“é€ æµç•…ä½“éªŒï¼Œè¦†ç›–ä»éœ€æ±‚åˆ°äº¤ä»˜çš„å…³é”®åœºæ™¯ï¼Œå¸®ä½ æ„å»ºçœŸæ­£æ™ºèƒ½çš„ GitLab æµç¨‹ã€‚
              </p>
            </div>
            <div class="landing-grid landing-grid--features">
              ${createFeatureCard(
                'ğŸ¯',
                'æ™ºèƒ½ä¸Šä¸‹æ–‡ç†è§£',
                'è‡ªåŠ¨æå– Issueã€MR ä¸ä»£ç å·®å¼‚çš„çœŸå®è¯‰æ±‚ï¼Œç»™å‡ºç»“æ„åŒ–çš„å»ºè®®ä¸è¡ŒåŠ¨é¡¹ã€‚'
              )}

              ${createFeatureCard(
                'ğŸ”—',
                'å¤šå®ä¾‹æ— ç¼é›†æˆ',
                'å®‰å…¨ç®¡ç†å¤šä¸ª GitLab å®ä¾‹å’Œ Tokenï¼Œè·¨å›¢é˜Ÿé¡¹ç›®ç»Ÿä¸€æ¥å…¥åŒä¸€å¥— Copilot èƒ½åŠ›ã€‚'
              )}

              ${createFeatureCard(
                'ğŸ›¡ï¸',
                'ä¼ä¸šçº§å®‰å…¨',
                'ç«¯åˆ°ç«¯åŠ å¯†å­˜å‚¨ã€ç»†ç²’åº¦è§’è‰²æƒé™ä¸å®¡è®¡æ—¥å¿—ï¼Œä¿éšœæ•æ„Ÿä»£ç åªç•™åœ¨ä½ çš„ç¯å¢ƒã€‚'
              )}

              ${createFeatureCard(
                'âš¡',
                'å®æ—¶æµå¼åé¦ˆ',
                'Webhook è§¦å‘åç§’çº§å“åº”ï¼Œå¤„ç†è¿‡ç¨‹é€šè¿‡æµå¼è¯„è®ºä¸é€šçŸ¥å®æ—¶åŒæ­¥ç»™ç›¸å…³äººã€‚'
              )}

              ${createFeatureCard(
                'ğŸ§ ',
                'æ¨¡å‹æ™ºé€‰',
                'æ ¹æ®ä»»åŠ¡å†…å®¹ä¸å›¢é˜Ÿç­–ç•¥è‡ªåŠ¨æŒ‘é€‰ Claudeã€GPTã€Gemini ç­‰æ¨¡å‹ç»„åˆã€‚'
              )}

              ${createFeatureCard(
                'ğŸ”§',
                'ä¸€ç«™å¼é…ç½®ä½“éªŒ',
                'å¼•å¯¼å¼å‘å¯¼ã€é¢„æ£€æµ‹è¯•ä¸è¯Šæ–­é¢æ¿ï¼Œ3 åˆ†é’Ÿå®Œæˆéƒ¨ç½²å¹¶æŒç»­ç¨³å®šè¿è¡Œã€‚'
              )}
            </div>
          </section>

          <section class="landing-section landing-section--steps">
            <div class="landing-section-heading">
              <span class="landing-pill landing-pill--glass">
                <span class="landing-pill-dot"></span>
                How it works
              </span>
              <h2 class="landing-section-title">ä¸‰æ­¥å®Œæˆéƒ¨ç½²</h2>
              <p class="landing-section-subtitle">
                å…¨å›¾å½¢åŒ–ç•Œé¢ï¼Œæ”¯æŒè‡ªæ‰˜ç®¡è¿è¡Œï¼Œå¸®åŠ©å›¢é˜Ÿå¿«é€Ÿè½åœ° AI åä½œæµç¨‹ã€‚
              </p>
            </div>
            <div class="landing-steps">
              ${createStepCard(
                '01',
                'æ³¨å†Œå¹¶è¿æ¥ GitLab',
                'åˆ›å»ºè´¦æˆ·ã€å½•å…¥å®ä¾‹ä¸ Access Tokenï¼Œå®Œæˆå¯†é’¥éªŒè¯ã€‚'
              )}

              ${createStepCard(
                '02',
                'é…ç½® Webhook',
                'é€‰æ‹©éœ€è¦ç›‘å¬çš„é¡¹ç›®ä¸äº‹ä»¶ï¼Œå¹¶é€šè¿‡æµ‹è¯•æŒ‰é’®éªŒè¯ä¼ è¾“é“¾è·¯ã€‚'
              )}

              ${createStepCard(
                '03',
                'åœ¨ GitLab å†…å‘¼å« AI',
                'åœ¨ Issueã€è¯„è®ºæˆ– MR ä¸­ @claude / @codexï¼Œäº«å—å®æ—¶çš„æ™ºèƒ½ååŠ©ã€‚'
              )}

              ${createStepCard(
                '04',
                'ç›‘æ§ä¸è°ƒä¼˜',
                'é€šè¿‡ Dashboard è§‚å¯ŸæˆåŠŸç‡ä¸è°ƒç”¨é‡ï¼ŒæŒ‰å›¢é˜Ÿç­–ç•¥è°ƒæ•´ Prompt ä¸æ¨¡å‹ã€‚'
              )}
            </div>
          </section>

          <section class="landing-section landing-section--cta">
            <div class="landing-cta">
              <div class="landing-cta-content">
                <span class="landing-pill landing-pill--glass">
                  <span class="landing-pill-dot"></span>
                  Ready for next sprint
                </span>
                <h2>æŠŠç°ä»£åä½œä½“éªŒå¸¦å…¥ GitLab</h2>
                <p>éƒ¨ç½² GitLab Copilotï¼Œè‡ªæ‰˜ç®¡ç¯å¢ƒå³å¯è·å¾—æ™ºèƒ½è¯„å®¡ã€Issue åŠ©æ‰‹ä¸æµæ°´çº¿å»ºè®®ã€‚</p>
              </div>
              <div class="landing-cta-actions">
                <a href="${basePath}/register" class="btn btn-primary btn-lg">
                  åˆ›å»ºè´¦æˆ·
                </a>
                <a href="${basePath}/config" class="btn btn-secondary btn-lg">
                  æŸ¥çœ‹é…ç½®ç¤ºä¾‹
                </a>
              </div>
            </div>
          </section>
        `,
        'home',
        {
          layout: 'landing',
          hidePageHeader: true,
          containerClass: 'landing-container'
        }
      );
    }

    function createFeatureCard(icon, title, description) {
      return `
        <article class="feature-card">
          <div class="feature-card__icon">${icon}</div>
          <h3 class="feature-card__title">${title}</h3>
          <p class="feature-card__description">${description}</p>
        </article>
      `;
    }

    function createStepCard(number, title, description) {
      return `
        <article class="step-card">
          <div class="step-card__index">${number}</div>
          <div>
            <h3 class="step-card__title">${title}</h3>
            <p class="step-card__description">${description}</p>
          </div>
        </article>
      `;
    }
  </script>
</body>
</html>
